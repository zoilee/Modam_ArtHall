<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modam Art Hall</title>
    <!-- 스타일 시트 -->
    
    <link rel="stylesheet" th:href="@{/css/layout/style.css}">
    <link rel="stylesheet" th:href="@{/css/main/style.css}">
    <!-- Swiper CSS -->
    
    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link
    rel="stylesheet"
    href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
</head>
<body>

    <!-- 헤더 -->
    <th:block th:replace="~{fragments/header :: headerFragment}"></th:block>

    <!-- Hero 섹션 -->
    <div class="hero">
        <h1>hero1(slide)</h1>
    </div>

    <div class="container-fluid nowOn">
        <div class="nowOn-header">
            <h1>What's <span>ON</span></h1>
            <div class="whatson">
                <div class="whatsonBack1"></div>
                <div class="whatsonBack2"></div>
            </div>
            <button class="show-all-btn" onclick="window.location.href='/showList'">공연전체보기 +</button>
        </div>
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <a class="swiper-slide maincard" th:href="@{'/showDetail/' + ${performance.id}}" th:each="performance : ${performances}">
                    <div class="performance-image">
                        <img th:src="${performance.imagesEntities != null && performance.imagesEntities.size() > 0
                                      ? performance.imagesEntities[0].imageUrl
                                      : '/imgs/default-poster.jpg'}"
                             class="card-img-top" alt="공연 이미지">
                    </div>
                    <div class="performance-info">
                        <span class="venue">모담 A홀</span>
                        <h3 class="title" th:text="${performance.title}">공연 제목</h3>
                        <p class="date" th:text="${performance.startDate} + ' ~ ' + ${performance.endDate}">공연 기간</p>
                    </div>
                </a>
            </div>
            <!-- ... 네비게이션 버튼/페이지네이션 ... -->
            <div class="row">
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
            </div>
            
        </div>
    </div>
    
    
    
    
        <!-- 공지사항 섹션 -->
        <div class="notice-section row">
            <div class="notice-header">
                <h2>공지사항</h2>
                <div class="underline row">
                    <div class="notice-underline1"></div>
                    <div class="notice-underline2"></div>
                </div>
            </div>
            <div class="notice-body">
                <ul class="notice-list">
                    <li class="notice-item" th:each="notice : ${recentNotices}">
                        <a th:href="@{'/userNoticeView?id=' + ${notice.id}}">
                            <span class="notice-title" th:text="${notice.title}">공지사항 제목</span>
                            <span class="notice-date" th:text="${#dates.format(notice.createdAt, 'yyyy.MM.dd')}">2024.12.12</span>
                        </a>
                    </li>
                </ul>
                <div class="notice-more">
                    <a href="/userNoticeList" class="more-link">전체보기</a>
                </div>
            </div>
        </div>

        <!--top 버튼-->
        <button id="topButton" onclick="scrollToTop()">▲</button>
   
    <!-- 푸터 -->
    <th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>

    <!-- 부트스트랩 스크립트 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const swiper = new Swiper('.swiper-container', {
                slidesPerView: 3, // 한 번에 보이는 슬라이드 개수
                spaceBetween: 100, // 슬라이드 간 간격
                loop: true, // 무한 루프
                centeredSlides: true, // 중앙에 슬라이드 정렬
                autoplay: {
                    delay: 3000, // 3초 간격으로 자동 슬라이드
                    disableOnInteraction: false, // 사용자 상호작용 후에도 자동 슬라이드 유지
                },
                pagination: {
                    el: '.swiper-pagination', // 페이지네이션 요소
                    clickable: true, // 클릭 가능
                },
                navigation: {
                    nextEl: '.swiper-button-next', // 다음 버튼
                    prevEl: '.swiper-button-prev', // 이전 버튼
                },
            });

            // 카드 hover 시 슬라이드 일시정지 및 재개
            const cards = document.querySelectorAll('.swiper-slide');
            cards.forEach((card) => {
                card.addEventListener('mouseenter', () => swiper.autoplay.stop()); // hover 시 멈춤
                card.addEventListener('mouseleave', () => swiper.autoplay.start()); // hover 해제 시 다시 시작
            });
        });

        // 스크롤 시 버튼 표시/숨김
        window.addEventListener("scroll", function () {
            const topButton = document.getElementById("topButton");
            if (window.scrollY > 200) {
                topButton.style.display = "flex"; // 스크롤 200px 이상일 때 버튼 표시
            } else {
                topButton.style.display = "none"; // 스크롤 200px 이하일 때 버튼 숨김
            }
        });

        // 맨 위로 부드럽게 스크롤
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: "smooth" });
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            fetchData(0);
        });
    </script>
</body>
</html>
