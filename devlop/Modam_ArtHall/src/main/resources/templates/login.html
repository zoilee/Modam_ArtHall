<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 레이아웃</title>
        <!-- 스타일 시트 -->
    <link rel="stylesheet" th:href="@{/css/layout/style.css}">
    <link rel="stylesheet" th:href="@{/css/login/style.css}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <!-- 헤더 -->
    <th:block th:replace="~{fragments/header :: headerFragment}"></th:block>
        <!-- 메인 컨테이너 -->
        <div class="container-fluid full-height d-flex flex-column">
            <div class="row">
                <!-- 사진 영역 -->
                <div class="col-md-8 d-flex align-items-center justify-content-center" style="background-color: #f0f0f0; height: 100vh;">
                    <div class="text-center" style="font-size: 24px;">사진</div>
                </div>

                <!-- 로그인 섹션 -->
                <div class="col-md-4 d-flex align-items-center justify-content-center" style="background-color: #cccccc; height: 100vh;">
                    <div class="bg-white p-4 shadow" style="width: 100%; max-width: 500px;">
                        <h2 class="text-center mb-4 font-weight-bold">로그인</h2>
                        <!-- Alert 메시지 표시 -->
                        <div th:if="${alertMessage}" class="alert alert-danger" role="alert">
                            <p th:text="${alertMessage}"></p>
                        </div>
                        <form th:action="@{/login}" method="post">
                            <div class="form-group">
                                <input type="text" placeholder="아이디" name="username" class="form-control">
                            </div>
                            <div class="form-group">
                                <input type="password" placeholder="비밀번호" name="password" class="form-control">
                            </div>
                            <div class="d-flex justify-content-between my-3">
                                <a href="/oauth2/authorization/kakao" class="btn btn-secondary flex-fill mx-1">카톡</a>
                                <a href="/oauth2/authorization/naver" class="btn btn-secondary flex-fill mx-1">
                                    <img src="/imgs/naver/btnG_축약형.png" alt="네이버 로그인" style="height: 24px;">
                                </a>
                                <a href="/oauth2/authorization/google" class="btn btn-secondary flex-fill mx-1">구글</a>
                            </div>
                            <button type="submit" class="btn btn-secondary btn-block mb-2">로그인</button>
                            <button type="button" class="btn btn-light btn-block mb-2" onclick="location.href='/register'">회원가입</button>
                            <a th:href="@{/findAccount}" class="d-block text-center text-muted">아이디/비밀번호 찾기</a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
<!-- 푸터 가져오기 -->
<th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>
<script>
    // URLSearchParams를 사용하여 쿼리 파라미터 확인
    const urlParams = new URLSearchParams(window.location.search);

    // error=true가 URL에 포함되어 있으면 alert 메시지를 띄움
    if (urlParams.has('error') && urlParams.get('error') === 'true') {
        alert('아이디 또는 비밀번호가 맞지 않습니다. 다시 입력해 주세요.');
    }
</script>
<!-- Bootstrap JS, Popper.js, and jQuery -->
<!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
</body>
</html>